# TermTalk — Specification (concise)

## Purpose
TermTalk is a minimal, terminal-based peer-to-peer messaging prototype intended for short-lived, direct chats. This document summarizes the current command interface and the protocol flow used by the reference implementation.

## CLI commands
- `host [--ttl SECONDS] [--port PORT]` — create a new ephemeral room and listen for peers.
- `join <room-id>` — join an existing room using its Room ID.
- `exit` — leave or stop hosting a room.

Notes: the `host` command prints a Room ID which peers can use to join. The current reference implementation resolves Room IDs using a local `RoomManager` (process-local). See README for discovery limitations and deployment options.

## Room ID format
- Current (reference): a short token (e.g. `4dac048a`) generated by the host.

Workflow (high level):
1. Host creates a room and starts listening on a TCP port.
2. Host displays the Room ID to the operator.
3. Guest uses `join <room-id>` to request to join — the client looks up the room entry in a local `RoomManager` and retrieves host IP/port.
4. Client connects to host IP:port and a lightweight handshake runs to derive a session key.
5. Encrypted chat begins using the derived session key.
6. Room TTL or host operator ends the session; sockets are closed and in-memory keys are discarded.

## Protocol notes
- Handshake: exchange short public identifiers and derive a symmetric session key (deterministic, demo-only algorithm).
- Message protection: messages are authenticated with HMAC-SHA256 and Base64-encoded in the reference implementation.

## Limitations (reference impl.)
- Room ID discovery is local to a running `RoomManager` instance. For cross-machine use, a rendezvous/registry service is required.
- The handshake and cryptography are intentionally simple for demonstration and tests — production deployments require an AEAD cipher (e.g. AES-GCM or ChaCha20-Poly1305) and a secure key exchange (e.g. X25519).

